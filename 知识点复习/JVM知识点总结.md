# JVM知识点总结

[TOC]

## 1. JVM、JDK和JRE关系

+ JVM：就是我们常说的**Java虚拟机**，它是整个java实现跨平台的最核心的部分，所有的java程序会首先被编译为.class的类文件，这种类文件可以在虚拟机上执行，也就是说class并不直接与机器的操作系统相对应，而是经过虚拟机间接与操作系统交互，由虚拟机将程序解释给本地系统执行。

+ JRE：**Java 运行环境**。它主要包含两个部分：JVM 的标准实现和 Java 的一些基本类库。相对于 JVM 来说，JRE多出来一部分 Java 类库。
+ JDK：**Java开发工具包**，在其安装目录下面有六个文件夹、一些描述文件、一个src压缩文件。bin、include、lib、 jre这四个文件夹起作用，demo、sample是一些例子。
  + bin：最重要的是编译工具（javac.exe）
  + include：java和JVM交互用的头文件
  + lib：类库
  + jre：Java运行环境（即安装了JDK，就不需要再单独安装Jre）

三者的包含关系如图：

![](data:image/jpeg;base64,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)

## 2. Java类加载机制

### 2.1 类的生命周期

类的生命周期可分为：**加载、连接、初始化、使用和卸载**五个部分。

### 2.2 Java类加载流程

Java类加载主要是指生命周期中的**加载、连接、初始化**三个阶段。其中连接又可分为：**验证、准备、解析**三个部分。

+ 加载：这个阶段会在内存中生成一个代表这个类的 java.lang.Class 对象，作为方法区这个类的各种数据的入口，获取二进制字节流的方式可分为：

  + 从一个 Class 文件获取
  + 从 ZIP 包中读取，例如：jar 包和 war 包中读取
  + 运行时计算生成，例如：动态代理
  + 由其它文件生成，例如：将 JSP 文件转换成对应的 Class 类

+ 验证：确保 Class 文件的字节流中包含的信息符合当前虚拟机的要求，并且不会危害虚拟机自身的安全。

  可分为以下四个流程：

  + 文件格式验证
  + 元数据验证
  + 字节码验证
  + 符号引用验证

+ 准备：正式为类变量（被static修饰的变量）分配内存并设置类变量的初始值阶段，即在方法区中分配这些变量所使用的内存空间。实例变量不会在这阶段分配内存，它将会在对象实例化时随着对象一起分配在 Java 堆中。

+ 解析：虚拟机将常量池中的符号引用替换为直接引用的过程。

  + 符号引用：就是 class 文件中的CONSTANT_Class_info、CONSTANT_Field_info、CONSTANT_Method_info等变量，符号引用与虚拟机实现的布局无关，引用的目标并不一定要已经加载到内存中。各种虚拟机实现的内存布局可以各不相同，但是它们能接受的符号引用必须是一致的，因为符号引用的字面量形式明确定义在 Java 虚拟机规范的 Class 文件格式中。
  + 直接引用：指向目标的指针，相对偏移量或是一个能间接定位到目标的句柄。如果有了直接引用，那引用的目标必定已经在内存中存在

+ 初始化：初始化阶段才真正开始执行类中的定义的 Java 程序代码，虚拟机执行类构造器 <clinit>() 方法对类的静态变量赋予正确的初始值，JVM 负责对类进行初始化。

### 2.3 类加载器

+ **BootStrap ClassLoader**：启动类加载器，主要负责jdk_home/lib目录下的核心api或者x-bootclasspath 选项指定的jar包的装入工作。

+ **Extension ClassLoader**：扩展类加载器，主要负责jdk_home/lib/ext 目录下的jar包 或者 -Djava.ext.dirs指定目录下的jar包装入工作。
+ **System ClassLoader**：系统类加载器，主要负责 java -classpath / -Djava.class.path 所指目录下的类与jar。
+ **User Custom ClassLoader**：用户自定义加载器，通过java.lang.classloader的子类动态加载。

### 2.4 双亲委派模式

 双亲委派模式的工作流程：如果一个类加载器收到了类加载的请求，它首先不会自己去加载这个类，而是把请求委托给父加载器去完成，依次向上，因此，所有的类加载请求最终都应该被传递到顶层的启动类加载器中，只有当父加载器没有找到所需的类时，子加载器才会尝试去加载该类。

流程如图所示：

![](https://github.com/Newtol/interview/blob/master/Img/%E5%8F%8C%E4%BA%B2%E5%A7%94%E6%B4%BE.png)

双亲委派模式的好处：

+ 通过带有优先级的层级关可以避免类的重复加载，保证唯一性；
+ 保证 Java 程序安全稳定运行，Java 核心 API 定义类型不会被随意替换。

### 2.5 获取类的对象的三种方式

+ 类名.class，例如：String.class
+ 对象.getClass()，例如：”hello”.getClass()
+ Class.forName()，例如：Class.forName(“java.lang.String”)

## 3. JVM内存模型

JVM内存模型可分为：**线程共享**和**线程私有**两种。

+ 线程私有：线程私有数据区域生命周期与线程相同, 依赖用户线程的启动/结束而创建/销毁
  + **程序计数器**：是当前线程所执行的字节码的行号指示器，执行字节码工作时就是利用程序计数器来选取下一条需要执行的字节码指令,如果正在执行的是本地方法则为空,是唯一一个在虚拟机中没有规定任何 OutOfMemoryError 情况的区域。
  + **本地方法栈**：本地方法栈则为Native 方法服务
  + **虚拟机栈**：每个 Java 方法在执行的同时会创建一个栈帧用于存储局部变量表、操作数栈、常量池引用等信息。每一个方法从调用直至执行完成的过程，就对应着一个栈帧在 Java 虚拟机栈中入栈和出栈的过程。

+ 线程共享：线程共享区域随虚拟机的启动/关闭而创建/销毁。
  + **堆**（运行时内存）：创建的对象和数组都保存在 Java 堆内存中，也是垃圾收集器进行垃圾收集的最重要的内存区域。根据分代收集算法，堆又可以分为：新生代和老年代。
  + **方法区/永久代**：用于存储被 JVM 加载的类信息、常量、静态变量、即时编译器编译后的代码等数据。

### 3.1 JVM堆

新生代：是用来存放新生的对象。一般占据堆的1/3空间。由于频繁创建对象，所以新生代会频繁触发MinorGC 进行垃圾回收。新生代又分为 **Eden 区**、**ServivorFrom**、**ServivorTo** 三个区。

+ 所有对象都创建在新生代的Eden区，当Eden区满后触发Minor GC,将Eden区和ServivorFrom去存活的对象复制到ServivorTo区中，并且将对象的“年龄”+1,如果达到进入老年代的条件（ServivorTo区空间不足或者年龄达到进入老年代条件），则将对象移动到老年代。
+ 保证一个Servivor区是空的，新生代Minor GC就是在两个Servivor区之间相互复制存活的对象，直到Servivor区满为止。

老年代：主要存放应用程序中生命周期长的内存对象，老年代的对象比较稳定，所以 MajorGC 不会频繁执行。

